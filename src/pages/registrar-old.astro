---
import Layout from "../components/layout/Layout.astro"
---

<script is:inline src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.89.0/dist/umd/supabase.min.js"></script>

<script is:inline>
    const { createClient } = supabase
    const supabaseUrl = 'https://seqolypxaaqyrwzcwktp.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlcW9seXB4YWFxeXJ3emN3a3RwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMTM0NDgsImV4cCI6MjA3NzU4OTQ0OH0.k4k6oql2nk_4MwmTrP9K-5hH0YlMRmSgiYg7UmU9cR4'
    const client = createClient(supabaseUrl, supabaseKey)    
</script>

<Layout>
    <section>
        <div>
            <small>
                <h1>Termos e Condições</h1>
                
                <p>
                    Este documento é um texto provisório (placeholder) e não possui valor legal.
                    Seu conteúdo serve apenas para fins ilustrativos até a criação da versão final.
                </p>
                
                <h2>1. Aceitação dos Termos</h2>
                <p>
                    Ao acessar este site, o usuário concorda, de forma fictícia, com os termos e condições aqui descritos.
                    Este texto não representa um contrato real.
                </p>
                
                <h2>2. Uso do Site</h2>
                <p>
                    O usuário compromete-se a utilizar este site apenas para fins lícitos e de acordo com
                    as leis aplicáveis. Este parágrafo é meramente ilustrativo.
                </p>
                
                <h2>3. Cadastro e Informações</h2>
                <p>
                    Algumas funcionalidades podem exigir o fornecimento de informações pelo usuário.
                    Os dados informados são considerados fictícios neste contexto de placeholder.
                </p>
                
                <h2>4. Propriedade Intelectual</h2>
                <p>
                    Todo o conteúdo apresentado neste site, incluindo textos, imagens e marcas,
                    é protegido por direitos autorais de forma hipotética.
                </p>
                
                <h2>5. Limitação de Responsabilidade</h2>
                <p>
                    O site não se responsabiliza por quaisquer danos diretos ou indiretos decorrentes
                    do uso das informações aqui apresentadas. Texto apenas ilustrativo.
                </p>
                
                <h2>6. Modificações dos Termos</h2>
                <p>
                    Estes Termos e Condições podem ser alterados a qualquer momento, sem aviso prévio,
                    apenas para fins de demonstração.
                </p>
                
                <h2>7. Links para Terceiros</h2>
                <p>
                    Este site pode conter links para sites externos, pelos quais não se responsabiliza.
                    Este conteúdo é apenas um exemplo.
                </p>
                
                <h2>8. Disposições Gerais</h2>
                <p>
                    Caso alguma disposição destes termos seja considerada inválida, as demais permanecerão
                    vigentes, apenas em caráter ilustrativo.
                </p>
                
                <h2>9. Contato</h2>
                <p>
                    Para dúvidas relacionadas a estes Termos e Condições, utilize os canais de contato
                    fictícios disponíveis neste site.
                </p>
            </small>            
        </div>
        <article hx-boost="false">
            <h1>Criar Conta</h1>
            <form x-data="{
                email: '',
                password: '',
                checkPassword: '',
                confirmation: false,
                alert: [],
                async submit(){
                    this.alert = []
                    
                    if(this.email == '') this.alert.push('Email vazio')
                    if(this.password == '') this.alert.push('Senha vazia')
                    if(this.checkPassword == '') this.alert.push('Confirmação de senha faltando')
                    if(this.password !== this.checkPassword) this.alert.push('Senha e confirmação não são iguais')
                    
                    if(this.alert.length == 0){
                        let { data, error } = await client.auth.signUp({ email: this.email , password: this.password})
                        if(error){
                            console.log(error)
                            this.alert.push(error)
                        } else {
                            console.log(data)
                            window.location.href = '/dashboard'
                        }
                    }
                }
            }"
            @submit.prevent="submit" 
            >
            <div>
                <template x-for="message in alert">
                    <p> * <span x-text="message"></span> </p>
                </template>
            </div>
            <label>
                Email:
                <input type="email" name="email" x-model="email">
            </label>
            <label>
                Senha:
                <input type="password" name="password" x-model="password">
            </label>
            <label>
                Confirmar Senha:
                <input type="password" name="checkPassword" x-model="checkPassword">
            </label>
            <label for="">
                <input type="checkbox" x-model="confirmation"> Confirmo que li e concordo com os termos e condições abaixo
            </label>
            <button :disabled="!confirmation" role="button" style="width: 100%;">Cadastrar</button>
        </form>
    </article>
</section>
</Layout>

<style>
    section {
        align-items: baseline;
        position: relative;
    }
    
    form {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    
    section article {
        position: sticky;
        top: 7rem;
    }

    article p {
        color: red;
    }
    
    button {
        width: 100%;
    }
    
    small h1{
        font-size: 2rem;
    }
    
    small h2 {
        font-size: 1.2rem;
    }
    
    @media (max-width: 767px) {
        section {
            display: flex;
            flex-direction: column-reverse;
            align-items: stretch;
        }
        
        section article {
            position: static;
            top: 7rem;
        }
        
        section div:has(small) {
            max-height: 30vh;
            overflow-y: scroll;
            border: 2px solid #0001;
            padding: 1rem;
        }
    }
</style>